<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>sparrow&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="sparrow&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="sparrow&#39;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sparrow&#39;s blog">
  
    <link rel="alternate" href="/atom.xml" title="sparrow&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">sparrow&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Python 第三方模块 Pillow 中文文档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/05/Python 第三方模块 Pillow 中文文档/" class="article-date">
  <time datetime="2019-08-05T07:39:12.942Z" itemprop="datePublished">2019-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/05/Python 第三方模块 Pillow 中文文档/">Python 第三方模块 Pillow 中文文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python-第三方模块-Pillow"><a href="#Python-第三方模块-Pillow" class="headerlink" title="Python 第三方模块 Pillow"></a>Python 第三方模块 Pillow</h1><blockquote>
<p> v:5.1.x<br> <a href="https://pillow.readthedocs.io/en/5.1.x/handbook/tutorial.html" target="_blank" rel="noopener">Docs&gt;Handbook&gt;Tutorial</a><br> 【】内为译者注</p>
</blockquote>
<h2 id="运用-Image-类"><a href="#运用-Image-类" class="headerlink" title="运用 Image 类"></a>运用 Image 类</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>im = Image.open(<span class="string">"hopper.ppm"</span>)</span><br></pre></td></tr></table></figure>

<p>如果打开图片成功，函数回返回一个 <code>Image</code> 对象。可以检查文件内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(im.format, im.size, im.mode)</span><br><span class="line">PPM (<span class="number">512</span>, <span class="number">512</span>) RGB</span><br></pre></td></tr></table></figure>

<p><code>format</code> 属性标识图像的源。</p>
<p>*【并不=文件格式，我将此前用 Pillow 生成的 jpg 文件改为 png 再JP读入，print 出来仍是 jpg】<br><img src="https://i.loli.net/2018/04/12/5acf6523d3be8.jpg" alt="2018-04-12_17-34-42.jpg"></p>
<p>如果图像并非由文件读取而来，则设定为 <code>None</code>。</p>
<p><code>size</code> 属性返回图像宽高值（单位为像素）的二元元组。</p>
<p><code>mode</code> 属性定义图像中波段的数量和名称，以及像素类型和深度。常见值有灰度图像的 L（亮度） ，真彩图像为 RGB，用于打印的图像为 CMYK。</p>
<p>若文件无法打开，会出现 <code>IOError</code> 异常。</p>
<p>成功得到一个 <code>Image</code> 类实例后，可以用这一类定义的方法去处理图片。例如展示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>im.show()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意！ <code>show()</code> 的标准版本并不高效。如果没有安装 xv，它将不会工作。但当它工作时，非常适合测试和调试。</p>
</blockquote>
<h2 id="读写图像"><a href="#读写图像" class="headerlink" title="读写图像"></a>读写图像</h2><p>读取上面有例。</p>
<p>存储图像用 <code>save()</code>。如果存储时不定义格式，将会以存储文件名后缀作为格式。</p>
<h3 id="文件转为-JPEG"><a href="#文件转为-JPEG" class="headerlink" title="文件转为 JPEG"></a>文件转为 JPEG</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> infile <span class="keyword">in</span> sys.argv[<span class="number">1</span>:]:</span><br><span class="line">    f, e = os.path.splitext(infile)</span><br><span class="line">    outfile = f + <span class="string">".jpg"</span></span><br><span class="line">    <span class="keyword">if</span> infile != outfile:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            Image.open(infile).save(outfile)</span><br><span class="line">        <span class="keyword">except</span> IOError:</span><br><span class="line">            print(<span class="string">"cannot convert"</span>, infile)</span><br></pre></td></tr></table></figure>

<h3 id="创建-JPEG-缩略图"><a href="#创建-JPEG-缩略图" class="headerlink" title="创建 JPEG 缩略图"></a>创建 JPEG 缩略图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">size = (<span class="number">128</span>, <span class="number">128</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> infile <span class="keyword">in</span> sys.argv[<span class="number">1</span>:]:</span><br><span class="line">    outfile = os.path.splitext(infile)[<span class="number">0</span>] + <span class="string">".thumbnail"</span></span><br><span class="line">    <span class="keyword">if</span> infile != outfile:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            im = Image.open(infile)</span><br><span class="line">            im.thumbnail(size)</span><br><span class="line">            im.save(outfile, <span class="string">"JPEG"</span>)</span><br><span class="line">        <span class="keyword">except</span> IOError:</span><br><span class="line">            print(<span class="string">"cannot create thumbnail for"</span>, infile)</span><br></pre></td></tr></table></figure>

<h3 id="识别图像文件"><a href="#识别图像文件" class="headerlink" title="识别图像文件"></a>识别图像文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> infile <span class="keyword">in</span> sys.argv[<span class="number">1</span>:]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> Image.open(infile) <span class="keyword">as</span> im:</span><br><span class="line">            print(infile, im.format, <span class="string">"%dx%d"</span> % im.size, im.mode)</span><br><span class="line">    <span class="keyword">except</span> IOError:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="剪切、粘贴和合并图像"><a href="#剪切、粘贴和合并图像" class="headerlink" title="剪切、粘贴和合并图像"></a>剪切、粘贴和合并图像</h3><p>若要从图像中提取子矩形，请用 <code>crop()</code> 方法。</p>
<h4 id="从图像中复制子矩形"><a href="#从图像中复制子矩形" class="headerlink" title="从图像中复制子矩形"></a>从图像中复制子矩形</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box = (<span class="number">100</span>, <span class="number">100</span>, <span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">region = im.crop(box)</span><br></pre></td></tr></table></figure>

<p>区域由一个4-元组决定，其坐标为（左，上，右，下）。在 Python 图像库使用的座标系中 (0,0) 位于左上角。坐标单位为像素。因此上例中所选区域为 300 x 300 像素。</p>
<h4 id="处理子矩形，然后将其粘贴回去"><a href="#处理子矩形，然后将其粘贴回去" class="headerlink" title="处理子矩形，然后将其粘贴回去"></a>处理子矩形，然后将其粘贴回去</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">region = region.transpose(Image.ROTATE_180)</span><br><span class="line">im.paste(region, box)</span><br></pre></td></tr></table></figure>

<p>回贴区域时，区域的大小必须与给定区域完全匹配。此外，区域不能延伸到图像之外。然而，原始图像和区域的模式不需要匹配。如果模式不匹配，区域粘贴前会自动转换 。</p>
<p>下面是另一个示例:</p>
<h4 id="滚动图像"><a href="#滚动图像" class="headerlink" title="滚动图像"></a>滚动图像</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">roll</span><span class="params">(image, delta)</span>:</span></span><br><span class="line">    <span class="string">"""Roll an image sideways."""</span></span><br><span class="line">    xsize, ysize = image.size</span><br><span class="line"></span><br><span class="line">    delta = delta % xsize</span><br><span class="line">    <span class="keyword">if</span> delta == <span class="number">0</span>: <span class="keyword">return</span> image</span><br><span class="line"></span><br><span class="line">    part1 = image.crop((<span class="number">0</span>, <span class="number">0</span>, delta, ysize))</span><br><span class="line">    part2 = image.crop((delta, <span class="number">0</span>, xsize, ysize))</span><br><span class="line">    part1.load()</span><br><span class="line">    part2.load()</span><br><span class="line">    image.paste(part2, (<span class="number">0</span>, <span class="number">0</span>, xsize-delta, ysize))</span><br><span class="line">    image.paste(part1, (xsize-delta, <span class="number">0</span>, xsize, ysize))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> image</span><br></pre></td></tr></table></figure>

<p>请注意，从 <code>crop ()</code> 操作粘贴回时，首先调用 <code>load ()</code>。这是因为裁剪是一个懒惰的操作。如果未调用 <code>load ()</code>，则在粘贴命令中使用图像之前不会执行裁剪操作。这意味着第 1 部分将从已由第一次粘贴修改的图像版本中裁剪。</p>
<p>对于更高级的技巧，paste 方法还可以将透明度掩码作为可选参数。在此遮罩中，值 255 表示粘贴的图像在该位置不透明 (即，粘贴的图像保持原样)。值 0 表示粘贴的图像完全透明。中间值表示不同的透明度级别。例如，粘贴一个 RGB 图像并将其用作遮罩会粘贴图像的不透明部分，但不会粘贴其透明背景。</p>
<h4 id="分割和合并波段"><a href="#分割和合并波段" class="headerlink" title="分割和合并波段"></a>分割和合并波段</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r, g, b = im.split()</span><br><span class="line">im = Image.merge(<span class="string">"RGB"</span>, (b, g, r))</span><br></pre></td></tr></table></figure>

<p>请注意，对于单波段图像，<code>split ()</code> 返回图像本身。要使用单个色带，您可能需要先将图像转换为 “RGB”。</p>
<h3 id="几何变换"><a href="#几何变换" class="headerlink" title="几何变换"></a>几何变换</h3><p><code>PIL.Image.Image</code> 类包含调整图像大小 () 和旋转图像 () 的方法。前者采用给定新大小的元组，后者采用逆时针角度(以度为单位)。</p>
<h4 id="简单几何变换"><a href="#简单几何变换" class="headerlink" title="简单几何变换"></a>简单几何变换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">out = im.resize((<span class="number">128</span>, <span class="number">128</span>))</span><br><span class="line">out = im.rotate(<span class="number">45</span>) <span class="comment"># 逆时针角度</span></span><br></pre></td></tr></table></figure>

<p>若要以 90 度旋转图像，可以使用 <code>rotate()</code> 方法或 <code>transpose()</code> 方法。后者也可用于围绕其水平或垂直轴翻转图像。</p>
<h4 id="变换图像"><a href="#变换图像" class="headerlink" title="变换图像"></a>变换图像</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">out = im.transpose(Image.FLIP_LEFT_RIGHT)</span><br><span class="line">out = im.transpose(Image.FLIP_TOP_BOTTOM)</span><br><span class="line">out = im.transpose(Image.ROTATE_90)</span><br><span class="line">out = im.transpose(Image.ROTATE_180)</span><br><span class="line">out = im.transpose(Image.ROTATE_270)</span><br></pre></td></tr></table></figure>

<p>如果 expand 标志为 <code>true</code>，则 <code>transpose(ROTATE)</code> 操作也可以与 <code>rotate()</code> 操作相同地执行，以提供对图像大小的相同更改。</p>
<p>可以通过 <code>transform()</code> 方法执行更一般形式的图像转换。</p>
<h3 id="色彩变换"><a href="#色彩变换" class="headerlink" title="色彩变换"></a>色彩变换</h3><p>Python 图像库允许您使用 <code>convert()</code> 方法在不同像素表示之间转换图像。</p>
<h4 id="模式间转换"><a href="#模式间转换" class="headerlink" title="模式间转换"></a>模式间转换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">im = Image.open(<span class="string">"hopper.ppm"</span>).convert(<span class="string">"L"</span>)</span><br></pre></td></tr></table></figure>

<p>库支持每个支持的模式与 “L” 和“RGB”模式之间的转换。【也就是所有文件格式的图像的色彩格式都可以直接在 L 与 RGB 之间】要在其他模式之间转换，可能必须使用中间图像 (通常是“RGB” 图像)。【也即以 RGB 作为中转格式】</p>
<h3 id="图像增强"><a href="#图像增强" class="headerlink" title="图像增强"></a>图像增强</h3><p>Python 图像库提供了许多可用于增强图像的方法和模块。</p>
<h4 id="滤镜"><a href="#滤镜" class="headerlink" title="滤镜"></a>滤镜</h4><p>ImageFilter 模块包含许多可与 <code>filter ( )</code> 方法一起使用的预先设定好的滤镜。</p>
<h5 id="添加滤镜"><a href="#添加滤镜" class="headerlink" title="添加滤镜"></a>添加滤镜</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFilter</span><br><span class="line">out = im.filter(ImageFilter.DETAIL)</span><br></pre></td></tr></table></figure>

<h4 id="点操作"><a href="#点操作" class="headerlink" title="点操作"></a>点操作</h4><p><code>point ()</code> 方法可用于转换图像的像素值 (例如图像对比度操作)。在大多数情况下，需要一个参数的函数对象可以传递给此方法。根据该函数处理每个像素:</p>
<h5 id="应用点变换"><a href="#应用点变换" class="headerlink" title="应用点变换"></a>应用点变换</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将每个点都乘以1.2</span></span><br><span class="line">out = im.point(<span class="keyword">lambda</span> i: i * <span class="number">1.2</span>)</span><br></pre></td></tr></table></figure>

<p>【试验如下图RGB、JPG，分别为原图、乘以1.2、乘以2.1。似乎效果是让图片变亮？】<img src="https://i.loli.net/2018/04/12/5acf6524308df.jpg" alt="testcompare.jpg"></p>
<p>使用上述技术，您可以快速将任何简单的表达式应用于图像。您也可以结合 <code>point ()</code> 和 <code>paste ()</code> 方法，选择性地修改影像:</p>
<h5 id="处理单个波段"><a href="#处理单个波段" class="headerlink" title="处理单个波段"></a>处理单个波段</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将图像分割为单个波段</span></span><br><span class="line">source = im.split()</span><br><span class="line"></span><br><span class="line">R, G, B = <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择红色小于 100 的区域</span></span><br><span class="line">mask = source[R].point(<span class="keyword">lambda</span> i: i &lt; <span class="number">100</span> <span class="keyword">and</span> <span class="number">255</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理绿色波段</span></span><br><span class="line">out = source[G].point(<span class="keyword">lambda</span> i: i * <span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将处理过的波段粘贴回来，但仅在红色 &lt; 100 的地方粘贴</span></span><br><span class="line">source[G].paste(out, <span class="literal">None</span>, mask)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建新的多波段图像</span></span><br><span class="line">im = Image.merge(im.mode, source)</span><br></pre></td></tr></table></figure>

<p>请注意用于创建掩码的语法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imout = im.point(<span class="keyword">lambda</span> i: expression <span class="keyword">and</span> <span class="number">255</span>)</span><br></pre></td></tr></table></figure>

<p>python 仅计算确定结果所需的逻辑表达式部分，并返回作为表达式结果检查的最后一个值。因此，如果上面的表达式为 <code>false (0)</code>，Python 不查看第二个操作数，因此返回 0。否则，返回 255。</p>
<h4 id="增强"><a href="#增强" class="headerlink" title="增强"></a>增强</h4><p>要获得更高级的映像增强功能，您可以使用 <code>image</code> 增强模块中的类。从图像创建增强对象后，可以使用增强对象快速尝试不同的设置。</p>
<p>您可以用这种方式调整对比度、亮度、色彩平衡和锐度。</p>
<h5 id="增强图像"><a href="#增强图像" class="headerlink" title="增强图像"></a>增强图像</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageEnhance</span><br><span class="line"></span><br><span class="line">enh = ImageEnhance.Contrast(im)</span><br><span class="line">enh.enhance(<span class="number">1.3</span>).show(<span class="string">"30% more contrast"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="图像序列"><a href="#图像序列" class="headerlink" title="图像序列"></a>图像序列</h3><h4 id="Python-图像库包含对图像序列-也称为动画格式-【动图】的一些基本支持。支持的序列格式包括-FLI-FLC、GIF-和一些实验格式。TIFF-文件还可以包含多个帧。"><a href="#Python-图像库包含对图像序列-也称为动画格式-【动图】的一些基本支持。支持的序列格式包括-FLI-FLC、GIF-和一些实验格式。TIFF-文件还可以包含多个帧。" class="headerlink" title="Python 图像库包含对图像序列 (也称为动画格式) 【动图】的一些基本支持。支持的序列格式包括 FLI / FLC、GIF 和一些实验格式。TIFF 文件还可以包含多个帧。"></a>Python 图像库包含对图像序列 (也称为动画格式) 【动图】的一些基本支持。支持的序列格式包括 FLI / FLC、GIF 和一些实验格式。TIFF 文件还可以包含多个帧。</h4><p>打开序列文件时，PIL 会自动加载序列中的第一帧。您可以使用 <code>seek</code> 和 <code>tell</code> 方法在不同的帧之间移动:</p>
<h4 id="读取顺序"><a href="#读取顺序" class="headerlink" title="读取顺序"></a>读取顺序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">im = Image.open(<span class="string">"animation.gif"</span>)</span><br><span class="line">im.seek(<span class="number">1</span>) <span class="comment"># 跳到第二帧</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        im.seek(im.tell()+<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 对im做点什么【？】</span></span><br><span class="line"><span class="keyword">except</span> EOFError:</span><br><span class="line">    <span class="keyword">pass</span> <span class="comment"># 序列结束</span></span><br></pre></td></tr></table></figure>

<p>如本示例所示，当序列结束时，您将获得 <code>EOFError</code> 异常。</p>
<p>请注意，库的当前版本中的大多数驱动程序仅允许您查找下一帧 (如上面的示例所示)。要倒回文件，您可能必须重新打开它。</p>
<p>下列类别可让您使用 for 循环在序列上循环:</p>
<h4 id="使用-ImageSequence-迭代器类"><a href="#使用-ImageSequence-迭代器类" class="headerlink" title="使用 ImageSequence 迭代器类"></a>使用 ImageSequence 迭代器类</h4><p>Python 图像库包括在 Postscript 打印机上打印图像、文本和图形的功能。下面是一个简单的示例:</p>
<h5 id="Drawing-Postscript【绘制附言，图像上的标题、文字等】"><a href="#Drawing-Postscript【绘制附言，图像上的标题、文字等】" class="headerlink" title="Drawing Postscript【绘制附言，图像上的标题、文字等】"></a>Drawing Postscript【绘制附言，图像上的标题、文字等】</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> PSDraw</span><br><span class="line"></span><br><span class="line">im = Image.open(<span class="string">"hopper.ppm"</span>)</span><br><span class="line">title = <span class="string">"hopper"</span></span><br><span class="line">box = (<span class="number">1</span>*<span class="number">72</span>, <span class="number">2</span>*<span class="number">72</span>, <span class="number">7</span>*<span class="number">72</span>, <span class="number">10</span>*<span class="number">72</span>) <span class="comment"># in points</span></span><br><span class="line"></span><br><span class="line">ps = PSDraw.PSDraw() <span class="comment"># default is sys.stdout</span></span><br><span class="line">ps.begin_document(title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制图像 (75 dpi)</span></span><br><span class="line">ps.image(box, im, <span class="number">75</span>)</span><br><span class="line">ps.rectangle(box)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制标题</span></span><br><span class="line">ps.setfont(<span class="string">"HelveticaNarrow-Bold"</span>, <span class="number">36</span>)</span><br><span class="line">ps.text((<span class="number">3</span>*<span class="number">72</span>, <span class="number">4</span>*<span class="number">72</span>), title)</span><br><span class="line"></span><br><span class="line">ps.end_document()</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/05/Python 第三方模块 Pillow 中文文档/" data-id="cjyzbw1lo0001d4cjxc5nxfam" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/04/hello-world/" class="article-date">
  <time datetime="2019-08-04T15:13:02.153Z" itemprop="datePublished">2019-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/04/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/04/hello-world/" data-id="cjyzbw1kx0000d4cjxuzhrk41" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/05/Python 第三方模块 Pillow 中文文档/">Python 第三方模块 Pillow 中文文档</a>
          </li>
        
          <li>
            <a href="/2019/08/04/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>